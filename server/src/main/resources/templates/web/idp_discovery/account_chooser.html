<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorator="layouts/main">
<div layout:fragment="page-content">
  <h4 class="txt-c u-pt++ u-pb++" th:text="${T(org.springframework.util.StringUtils).hasText(clientName) ? 'Sign in to continue to ' + clientName : 'Sign in to continue'}">
    Choose an account
  </h4>
  <div th:if="${param.error}" class="alert alert-error u-mb++">
    <p th:text="#{'login.' + ${param.error[0]}}">Error Message</p>
  </div>

  <div class="choose">
    <ul class="list-group">
      <li class="list-group-item" th:each="account, iter : ${savedAccounts}" th:inline="text">
        <form th:id="${account.userId}" action="/login/idp_discovery" th:action="@{/login/idp_discovery}" method="post" role="form">
          <input type="hidden" class="form-control" name="email" th:value="${account.origin == 'uaa' || account.origin == 'ldap' ? account.username : account.email}" />
        </form>
        <a href="#" th:onclick="'javascript:document.getElementById(\'' + ${account.userId} + '\').submit();'">
          <span class="account-avatar txt-c u-pt+ txt-m" th:style="'background-color: rgb(' + ${account.red} + ',' + ${account.green} + ',' + ${account.blue} +')'">
            <div class="h2 abbr txt-c pan man em-high">[[${account.username[0]}]]</div>
          </span>
          <span class="email-address txt-m mll u-pv++ u-pl+">
          [[${account.username}]]
          </span>
        </a>
        <span class="remove-account">
          <a th:href="@{/delete_saved_account(userId=${account.userId})}"><div class="fa fa-icon fa-close pull-right phl txt-m type-neutral-5"></div></a>
        </span>
      </li>
    </ul>
  </div>
  <div class="addl-actions txt-c u-mb++ u-mt++ clearfix">
    <div class="action">
      <a th:href="@{/login(otherAccountSignIn=true)}">Sign in to another account</a>
    </div>
  </div>
</div>
</html>
